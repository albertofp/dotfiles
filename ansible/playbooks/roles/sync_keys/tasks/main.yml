# TODO generalize env var injection
- name: Copy Personal Github SSH key
  ansible.builtin.copy:
    dest: '{{ ansible_env.HOME }}/.ssh/id_home_github'
    mode: '0600'
    src: '{{ playbook_dir }}/ssh_keys/id_home_github'
- name: Inject OpenAI API key
  ansible.builtin.lineinfile:
    create: true
    line: export OPENAI_API_KEY="{{ openai_api_key }}"
    path: '{{ ansible_env.HOME }}/.zshenv'
    state: present
    mode: '0755'
- name: Inject OpenAI API key (personal)
  ansible.builtin.lineinfile:
    create: true
    line: export OPENAI_API_KEY_PERSONAL="{{ openai_api_key_personal }}"
    path: '{{ ansible_env.HOME }}/.zshenv'
    state: present
    mode: '0755'
- name: Inject STK_PWD
  ansible.builtin.lineinfile:
    create: true
    line: export STK_PWD="{{ stk_pwd }}"
    path: '{{ ansible_env.HOME }}/.zshenv'
    state: present
    mode: '0755'
- name: Inject GITHUB_TOKEN
  ansible.builtin.lineinfile:
    create: true
    line: export GITHUB_TOKEN="{{ GITHUB_TOKEN }}"
    path: '{{ ansible_env.HOME }}/.zshenv'
    state: present
    mode: '0755'
